<%- include('../layouts/adminheader')%>
<h2 class="page-title">Products</h2>
<a href="/admin/products/add-product" class="btn btn-primary">Add a new product</a>
<br><br>

<% if (count > 0) { %>
<table class="table table-striped algin-middle">
    <thead>
        <tr class="home">
            <th>Product</th>
            <th>Price</th>
            <th>Category</th>
            <th>Product Image</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>

    <tbody>
        <% for(let i = products.length - 1; i >= 0; i--){ %>
        <tr>
            <td><%= products[i].title %></td>
            <td><%= parseFloat(products[i].price).toFixed(2) %> EGP</td>
            <td><%= products[i].category %></td>
            <td>
                <img src="/products images/<%= products[i]._id %>/<%= products[i].image %>"
                    alt="Product image not found" width="100px">
            </td>
            <td><a href="/admin/products/edit-product/<%= products[i]._id %>">Edit</a></td>
            <td><a class="confirmDeletion" href="/admin/products/delete-product/<%= products[i]._id %>">Delete</a></td>
        </tr>
        <% } %>
    </tbody>
</table>
<% } else { %>
<h3 class="text-center">There are no products</h3>
<% } %>
<%- include('../layouts/adminfooter')%>